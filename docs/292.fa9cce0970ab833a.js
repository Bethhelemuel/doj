"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[292],{7292:(T,u,p)=>{p.r(u),p.d(u,{default:()=>j});var o=p(4341),m=p(1261),g=p(7118),d=p(7349),e=p(3953),f=p(5844),c=p(177);function h(r,a){if(1&r){const n=e.RV6();e.j41(0,"p"),e.EFF(1,"Didn't receive OTP? "),e.j41(2,"a",15),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.resendOTP())}),e.EFF(3,"Resend OTP"),e.k0s()()}}function b(r,a){1&r&&(e.j41(0,"p",16),e.EFF(1,"Resending OTP..."),e.k0s())}function v(r,a){if(1&r&&(e.j41(0,"p",17),e.EFF(1),e.k0s()),2&r){const n=e.XpG();e.R7$(),e.JRh(n.errorMessage)}}let _=(()=>{class r{constructor(n,i,t,s,l){this.fb=n,this.authService=i,this.dialogRef=t,this.data=s,this.router=l,this.errorMessage="",this.isResending=!1,this.otpForm=this.fb.group({otp1:["",[o.k0.required,o.k0.pattern("[0-9]{1}")]],otp2:["",[o.k0.required,o.k0.pattern("[0-9]{1}")]],otp3:["",[o.k0.required,o.k0.pattern("[0-9]{1}")]],otp4:["",[o.k0.required,o.k0.pattern("[0-9]{1}")]],otp5:["",[o.k0.required,o.k0.pattern("[0-9]{1}")]],otp6:["",[o.k0.required,o.k0.pattern("[0-9]{1}")]]}),this.userEmail=s.email}onSubmit(){const n=this.getOtpCode();this.otpForm.valid?this.authService.verifyOtp({email:this.userEmail,otp:n}).subscribe({next:i=>{this.errorMessage=i.message,setTimeout(()=>{this.dialogRef.close(),this.router.navigate(["/login"])},5e3)},error:i=>{console.log(i.error),this.errorMessage=i.error.message}}):this.errorMessage="Please enter a valid 6-digit OTP"}getOtpCode(){return`${this.otpForm.value.otp1}${this.otpForm.value.otp2}${this.otpForm.value.otp3}${this.otpForm.value.otp4}${this.otpForm.value.otp5}${this.otpForm.value.otp6}`}resendOTP(){this.isResending=!0,this.authService.resendOtp().subscribe({next:()=>{this.isResending=!1},error:()=>{this.isResending=!1,this.errorMessage="Failed to resend OTP. Please try again later."}})}moveFocus(n,i){1===n.target.value.length&&i&&document.getElementById(i)?.focus()}submitOnComplete(){this.otpForm.valid&&this.onSubmit()}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(o.ok),e.rXU(f.u),e.rXU(d.CP),e.rXU(d.Vh),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-otp"]],standalone:!0,features:[e.aNF],decls:17,vars:5,consts:[[1,"otp-dialog"],[1,"otp-title"],[1,"otp-form",3,"ngSubmit","formGroup"],[1,"otp-inputs"],["type","text","maxlength","1","formControlName","otp1","autofocus","",1,"otp-input",3,"input"],["type","text","maxlength","1","formControlName","otp2",1,"otp-input",3,"input"],["type","text","maxlength","1","formControlName","otp3",1,"otp-input",3,"input"],["type","text","maxlength","1","formControlName","otp4",1,"otp-input",3,"input"],["type","text","maxlength","1","formControlName","otp5",1,"otp-input",3,"input"],["type","text","maxlength","1","formControlName","otp6",1,"otp-input",3,"input"],["type","submit",1,"verify-button",3,"disabled"],[1,"resend-otp"],[4,"ngIf"],["class","resending-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"resend-link",3,"click"],[1,"resending-message"],[1,"error-message"]],template:function(i,t){1&i&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Enter OTP"),e.k0s(),e.j41(3,"form",2),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(4,"div",3)(5,"input",4),e.bIt("input",function(l){return t.moveFocus(l,"otp2")}),e.k0s(),e.j41(6,"input",5),e.bIt("input",function(l){return t.moveFocus(l,"otp3")}),e.k0s(),e.j41(7,"input",6),e.bIt("input",function(l){return t.moveFocus(l,"otp4")}),e.k0s(),e.j41(8,"input",7),e.bIt("input",function(l){return t.moveFocus(l,"otp5")}),e.k0s(),e.j41(9,"input",8),e.bIt("input",function(l){return t.moveFocus(l,"otp6")}),e.k0s(),e.j41(10,"input",9),e.bIt("input",function(){return t.submitOnComplete()}),e.k0s()(),e.j41(11,"button",10),e.EFF(12,"Verify OTP"),e.k0s()(),e.j41(13,"div",11),e.DNE(14,h,4,0,"p",12)(15,b,2,0,"p",13),e.k0s(),e.DNE(16,v,2,1,"p",14),e.k0s()),2&i&&(e.R7$(3),e.Y8G("formGroup",t.otpForm),e.R7$(8),e.Y8G("disabled",t.otpForm.invalid),e.R7$(3),e.Y8G("ngIf",!t.isResending),e.R7$(),e.Y8G("ngIf",t.isResending),e.R7$(),e.Y8G("ngIf",t.errorMessage))},dependencies:[m.iI,g.G,c.bT,o.qT,o.me,o.BC,o.cb,o.tU,o.j4,o.JD],styles:[".otp-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;background:#f9f9f9;border-radius:10px;box-shadow:0 4px 15px #0000001a;max-width:400px;margin:auto}.otp-title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:20px;color:#333;font-weight:600}.otp-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.otp-inputs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;max-width:300px;margin-bottom:20px}.otp-input[_ngcontent-%COMP%]{width:40px;height:50px;text-align:center;font-size:24px;border:2px solid #ccc;border-radius:5px;transition:border-color .3s ease}.otp-input[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.verify-button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.verify-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.resend-otp[_ngcontent-%COMP%]{margin-top:15px}.resend-link[_ngcontent-%COMP%]{color:#007bff;cursor:pointer;text-decoration:none}.resend-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.error-message[_ngcontent-%COMP%]{color:red;margin-top:10px}  .cdk-overlay-dark-backdrop{background:#ffffffe6!important}  .otp-dialog-panel{color:#fff;background:#1e1e1ee6;border-radius:10px;padding:20px}"]})}}return r})();const F=(r,a)=>({alert:!0,"alert-success":r,"alert-danger":a});function C(r,a){if(1&r){const n=e.RV6();e.j41(0,"div",39),e.EFF(1),e.j41(2,"button",40),e.bIt("click",function(){e.eBV(n);const t=e.XpG();return e.Njj(t.closeAlert())}),e.j41(3,"span",41),e.EFF(4,"\xd7"),e.k0s()()()}if(2&r){const n=e.XpG();e.Y8G("ngClass",e.l_i(2,F,"success"===n.alertType,"danger"===n.alertType)),e.R7$(),e.SpI(" ",n.alertMessage," ")}}function k(r,a){1&r&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"First name is required."),e.k0s()())}function P(r,a){1&r&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"Last name is required."),e.k0s()())}function w(r,a){1&r&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"Email is required and must be a valid email address."),e.k0s()())}function O(r,a){1&r&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"Role is required."),e.k0s()())}function M(r,a){1&r&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"Password is required and must be at least 6 characters long."),e.k0s()())}function y(r,a){1&r&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"Confirm password is required and must match the password."),e.k0s()())}function x(r,a){1&r&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"Passwords must match."),e.k0s()())}let j=(()=>{class r{constructor(n,i,t,s){this.formBuilder=n,this.authService=i,this.dialog=t,this.router=s,this.SignUpOptions=[{image:"assets/images/authentication/google.svg",name:"Google"},{image:"assets/images/authentication/twitter.svg",name:"Twitter"},{image:"assets/images/authentication/facebook.svg",name:"Facebook"}],this.submitted=!1,this.showPassword=!1,this.showConfirmPassword=!1,this.alertMessage="",this.alertType="info",this.alertVisible=!1}ngOnInit(){this.initializeForm(),this.signUpForm.get("role").disable()}initializeForm(){this.signUpForm=this.formBuilder.group({firstName:["",[o.k0.required,o.k0.minLength(2)]],lastName:["",[o.k0.required,o.k0.minLength(2)]],emailAddress:["",[o.k0.required,o.k0.email]],role:["",o.k0.required],password:["",[o.k0.required,o.k0.minLength(6)]],confirmPassword:["",[o.k0.required]]},{validator:this.passwordMatchValidator}),this.signUpForm.get("emailAddress").valueChanges.subscribe(n=>{this.signUpForm.get("emailAddress").valid?(this.signUpForm.get("role").enable(),n.endsWith("@justice.gov.za")?(this.signUpForm.get("role").disable(),this.signUpForm.get("role").setValue("official")):(this.signUpForm.get("role").setValue("liquidator"),this.signUpForm.get("role").disable())):(this.signUpForm.get("role").disable(),this.signUpForm.get("role").setValue(""))})}passwordMatchValidator(n){const i=n.get("password")?.value,t=n.get("confirmPassword")?.value;return i===t?null:{mismatch:!0}}togglePasswordVisibility(){this.showPassword=!this.showPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}onSubmit(){this.signUpForm.valid?this.authService.register({firstName:this.signUpForm.get("firstName")?.value,lastName:this.signUpForm.get("lastName")?.value,email:this.signUpForm.get("emailAddress")?.value,password:this.signUpForm.get("confirmPassword")?.value,role:this.signUpForm.get("role")?.value}).subscribe({next:n=>{this.showAlert(n.message,"success"),setTimeout(()=>{this.closeAlert(),this.dialog.open(_,{data:{email:this.signUpForm.get("emailAddress")?.value}})},3e3)},error:n=>{this.showAlert(n.error.message,"danger")}}):this.showAlert("Please fill in all required fields correctly.","danger")}showAlert(n,i){this.alertMessage=n,this.alertType=i,this.alertVisible=!0,this.alertTimeout&&clearTimeout(this.alertTimeout),this.alertTimeout=setTimeout(()=>{this.alertVisible=!1},5e3)}closeAlert(){this.alertVisible=!1,this.alertTimeout&&clearTimeout(this.alertTimeout)}get f(){return this.signUpForm.controls}login(){this.router.navigate(["/login"]).then(()=>{window.location.reload()})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(o.ok),e.rXU(f.u),e.rXU(d.bZ),e.rXU(m.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-register"]],standalone:!0,features:[e.aNF],decls:77,vars:14,consts:[[1,"auth-main"],[1,"auth-bg"],[1,"auth-wrapper","v3"],[1,"auth-form"],[1,"auth-header","text-center","mb-3"],["href","javascript:"],["src","assets/images/logo-dark.gif","alt","logo img"],["role","alert",3,"ngClass",4,"ngIf"],[1,"card","my-4","shadow-lg","rounded-lg","border-0"],[1,"card-body","px-3","py-4"],[1,"text-center","mb-3"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group","mb-3"],["for","firstName",1,"form-label"],["type","text","formControlName","firstName","id","firstName","placeholder","First Name",1,"form-control","shadow-sm"],[4,"ngIf"],["for","lastName",1,"form-label"],["type","text","formControlName","lastName","id","lastName","placeholder","Last Name",1,"form-control","shadow-sm"],["for","emailAddress",1,"form-label"],["type","email","formControlName","emailAddress","id","emailAddress","placeholder","Email Address",1,"form-control","shadow-sm"],["for","role",1,"form-label"],["formControlName","role","id","role",1,"form-control","shadow-sm",3,"disabled"],["value","","disabled","","selected",""],["value","official"],["value","liquidator"],[1,"form-group","mb-3","position-relative"],["for","password",1,"form-label"],["formControlName","password","id","password","placeholder","Password",1,"form-control","shadow-sm",3,"type"],[1,"show-hide-icon",3,"click","ngClass"],["for","confirmPassword",1,"form-label"],["formControlName","confirmPassword","id","confirmPassword","placeholder","Confirm Password",1,"form-control","shadow-sm",3,"type"],[1,"text-sm","text-muted","text-center","mt-3"],["href","javascript:",1,"text-primary"],[1,"d-grid","mt-3"],["type","submit",1,"btn","btn-primary","shadow",3,"click"],[1,"text-center","mt-3"],[1,"text-primary",3,"click"],["role","alert",3,"ngClass"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"error"]],template:function(i,t){1&i&&(e.j41(0,"div",0),e.nrm(1,"div",1),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),e.nrm(6,"img",6),e.k0s()(),e.DNE(7,C,5,5,"div",7),e.j41(8,"div",8)(9,"div",9)(10,"h3",10)(11,"strong"),e.EFF(12,"Sign Up"),e.k0s()(),e.j41(13,"form",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"label",15),e.EFF(18,"First Name*"),e.k0s(),e.nrm(19,"input",16),e.DNE(20,k,3,0,"div",17),e.k0s()(),e.j41(21,"div",13)(22,"div",14)(23,"label",18),e.EFF(24,"Last Name*"),e.k0s(),e.nrm(25,"input",19),e.DNE(26,P,3,0,"div",17),e.k0s()()(),e.j41(27,"div",12)(28,"div",13)(29,"div",14)(30,"label",20),e.EFF(31,"Email Address*"),e.k0s(),e.nrm(32,"input",21),e.DNE(33,w,3,0,"div",17),e.k0s()(),e.j41(34,"div",13)(35,"div",14)(36,"label",22),e.EFF(37,"Role*"),e.k0s(),e.j41(38,"select",23)(39,"option",24),e.EFF(40,"Select Role"),e.k0s(),e.j41(41,"option",25),e.EFF(42,"Officials"),e.k0s(),e.j41(43,"option",26),e.EFF(44,"Liquidators"),e.k0s()(),e.DNE(45,O,3,0,"div",17),e.k0s()()(),e.j41(46,"div",12)(47,"div",13)(48,"div",27)(49,"label",28),e.EFF(50,"Password*"),e.k0s(),e.nrm(51,"input",29),e.j41(52,"i",30),e.bIt("click",function(){return t.togglePasswordVisibility()}),e.k0s(),e.DNE(53,M,3,0,"div",17),e.k0s()(),e.j41(54,"div",13)(55,"div",27)(56,"label",31),e.EFF(57,"Confirm Password*"),e.k0s(),e.nrm(58,"input",32),e.j41(59,"i",30),e.bIt("click",function(){return t.toggleConfirmPasswordVisibility()}),e.k0s(),e.DNE(60,y,3,0,"div",17)(61,x,3,0,"div",17),e.k0s()()(),e.j41(62,"p",33),e.EFF(63," By signing up, you agree to our "),e.j41(64,"a",34),e.EFF(65,"Terms of Service"),e.k0s(),e.EFF(66," and "),e.j41(67,"a",34),e.EFF(68,"Privacy Policy"),e.k0s(),e.EFF(69," . "),e.k0s(),e.j41(70,"div",35)(71,"button",36),e.bIt("click",function(){return t.onSubmit()}),e.EFF(72,"Create Account"),e.k0s()(),e.j41(73,"p",37),e.EFF(74," Already have an account? "),e.j41(75,"a",38),e.bIt("click",function(){return t.login()}),e.EFF(76,"Login here"),e.k0s()()()()()()()()),2&i&&(e.R7$(7),e.Y8G("ngIf",t.alertVisible),e.R7$(6),e.Y8G("formGroup",t.signUpForm),e.R7$(7),e.Y8G("ngIf",t.signUpForm.get("firstName").invalid&&t.signUpForm.get("firstName").touched),e.R7$(6),e.Y8G("ngIf",t.signUpForm.get("lastName").invalid&&t.signUpForm.get("lastName").touched),e.R7$(7),e.Y8G("ngIf",t.signUpForm.get("emailAddress").invalid&&t.signUpForm.get("emailAddress").touched),e.R7$(5),e.Y8G("disabled",!t.signUpForm.get("emailAddress").valid),e.R7$(7),e.Y8G("ngIf",t.signUpForm.get("role").invalid&&t.signUpForm.get("role").touched),e.R7$(6),e.Y8G("type",t.showPassword?"text":"password"),e.R7$(),e.Y8G("ngClass",t.showPassword?"fa fa-eye-slash":"fa fa-eye"),e.R7$(),e.Y8G("ngIf",t.signUpForm.get("password").invalid&&t.signUpForm.get("password").touched),e.R7$(5),e.Y8G("type",t.showConfirmPassword?"text":"password"),e.R7$(),e.Y8G("ngClass",t.showConfirmPassword?"fa fa-eye-slash":"fa fa-eye"),e.R7$(),e.Y8G("ngIf",t.signUpForm.get("confirmPassword").invalid&&t.signUpForm.get("confirmPassword").touched),e.R7$(),e.Y8G("ngIf",(null==t.signUpForm.errors?null:t.signUpForm.errors.mismatch)&&t.signUpForm.get("confirmPassword").touched))},dependencies:[m.iI,g.G,c.YU,c.bT,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.j4,o.JD],styles:[".auth-main[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:flex-start;background-color:#f5f7fa;padding-top:20px}.auth-bg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:200px;background:url(img-auth-bg.4ae9268779572893.svg) no-repeat center top;background-size:cover;z-index:-1}.auth-wrapper[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:0 auto}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]{padding:2rem;background-color:#fff;border-radius:.5rem;position:relative;z-index:10;margin-bottom:1rem}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:none;box-shadow:0 4px 12px #0000001a}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #e1e3e6;border-radius:.25rem;padding:.75rem;transition:all .2s ease}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 0 .2rem #007bff40}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{padding:.75rem;font-weight:700;background-color:#007bff;border-color:#007bff}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;border-color:#0056b3}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .auth-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:.9em;margin-top:5px}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .auth-footer[_ngcontent-%COMP%]{font-size:.875rem;color:#6c757d}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#007bff}.auth-wrapper[_ngcontent-%COMP%]   .auth-form[_ngcontent-%COMP%]   .auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}.position-relative[_ngcontent-%COMP%]{position:relative}.show-hide-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:70%;transform:translateY(-50%);color:#6c757d;font-size:1.2em;cursor:pointer;pointer-events:all}.show-hide-icon[_ngcontent-%COMP%]:hover{color:#007bff}.alert[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert-success[_ngcontent-%COMP%]{color:#155724;background-color:#d4edda;border-color:#c3e6cb}.alert-danger[_ngcontent-%COMP%]{color:#721c24;background-color:#f8d7da;border-color:#f5c6cb}.close[_ngcontent-%COMP%]{float:right;font-size:1.5rem;line-height:1;color:inherit;border:none;background:none}"]})}}return r})()}}]);